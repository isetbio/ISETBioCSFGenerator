1) The transition from coneMosaicHex is not complete.  We need to ablate this from the main thread.

To find what needs to be done, global search on ConeMosaicHex will get you most of them.

2) Can we delete ComputeParameterThreshold.m?

3) There are a lot of versions of different nre's that use the cMosaic.  Rationalize.  Perhaps all the specific ones should be implemented as calls into the most general one?

4) Similarly, we need to think about whether we need both TAFC versions of various stuff and the NWay_OneStimulusPerTrial.  Can we make the TAFC versions calls into the NWay_OneSTimulusPerTrial?

=================================================================================================
Notes (need further discussion before making any changes)
1) computeFunctions/scene/sceGrating.m
There is a helper function inside this function, called generatePresentationDisplay. It assumes a default screen display 'LCD-Apple', which cannot be changed. Perhaps we can add a field 'screenDisplay' to the struct gratingParams to have more flexibility.
2) rename 't_neuralResponseComputeExternalPipeline' -> 't_neuralResponseComputeCustomizedPipeline'
3) there is a bug in t_NWay_OneStimPerTrial.m (can't run). The bug is it calls computeThresholdNWay_OneStimulusPerTrial -> computePerformanceNWay_OneStimulusPerTrial -> combineContainersMat. It breaks at the last step because the input is only for 1 frame of a stimulus (i.e., dimension < 3). To fix it, we could either add temporalModulation as a varargin or replace createGratingScene with sceGrating.

Questions 
1) computeFunctions/scene/sceGrating.m: line 377
Why is desired peak luminance equal to mean luminance * 2.1? Where does 2.1 come from? Is it just a convention?

Added comments
1) computeFunctions/scene/sceGrating.m
switch (gratingParams.temporalModulation), case 'flashed', 'drifted', 'counter phase modulated'
switch (gratingParams.spatialModulationDomain), case 'cartesian', 'polar'
switch (gratingParams.spatialEnvelope), case 'disk', 'soft', 'rect', 'halfcos'

Fixed bugs
1) t_modulatedGratingsSceneGeneration.m
Stimulus #5: the original stimulus was out of the display gamut.
To fix it, I added customGratingParams.warningInsteadOfErrorOnOutOfGamut = true;
Or I could reduce the 'conContrastModulation' to lower values (e.g., [0.1, 0.1, -0.1])




