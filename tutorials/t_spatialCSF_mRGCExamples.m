% t_spatialCSF_mRGCExamples
%
% These are examples for t_spatialCSF that exercise the mRGC calculations.

% Examples:
%{
    % mRGCMosaic nre basic test: achromatic CSF
    t_spatialCSF('useMetaContrast', true, ...
        'whichNoiseFreeNre', 'mRGCMosaic', ...
        'mRGCOutputSignalType', 'mRGCs', ...
        'whichNoisyInstanceNre', 'Gaussian', ...
        'gaussianSigma', 0.1, ...
        'whichClassifierEngine', 'rceTemplateDistance', ...
        'useConeContrast', true, ...
        'useFixationalEMs', false, ...
        'temporalFilterValues', [], ...
        'oiPadMethod', 'zero', ...
        'visualizeEachScene', false, ...
        'visualizeEachResponse', true, ...
        'responseVisualizationFunction', @nreVisualizeMRGCmosaic, ...
        'maxVisualizedNoisyResponseInstances', 2, ...
        'maxVisualizedNoisyResponseInstanceStimuli', 2, ...
        'spatialFreqs', [0.3 0.6 1.2 3 6 12 30 60], ...
        'nTest', 1024, ...
        'validationThresholds', [0.5112 0.2519 0.1664 0.1859 0.1833 0.1797 0.5479 1.0000]);

    % mRGCMosaic nre basic test: achromatic, AO6mm optics, drifting CSF @ fovea
    validationThresholds = [ ...
        0.0768
        0.0725
        0.0715
        0.0721
        0.0721
        0.0707
        0.0650
        0.0653
        0.0606
        0.0600
        0.0469
        0.0424
        0.0360
        0.0358
        0.0320
        0.0346
        0.0397
        0.0534
        0.0855
        0.2616];

    t_spatialCSF('useMetaContrast', true, ...
        'whichNoiseFreeNre', 'mRGCMosaic', ...
        'mRGCOutputSignalType', 'mRGCs', ...
        'whichNoisyInstanceNre', 'Gaussian', ...
        'gaussianSigma', 0.1, ...
        'whichClassifierEngine', 'rceTemplateDistance', ...
        'useConeContrast', true, ...
        'useFixationalEMs', false, ...
        'temporalFilterValues', [], ...
        'oiPadMethod', 'zero', ...
        'visualizeEachScene', false, ...
        'visualizeEachResponse', true, ...
        'responseVisualizationFunction', @nreVisualizeMRGCmosaic, ...
        'maxVisualizedNoisyResponseInstances', 2, ...
        'maxVisualizedNoisyResponseInstanceStimuli', 2, ...
        'opticsType', 'adaptiveOptics6MM', ...
        'mRGCMosaicRawEccDegs', [0 0], ...
        'mRGCMosaicRawSizeDegs', [2 2], ...
        'eccDegs', [0.0 0], ...
        'sizeDegs', [0.5 0.5], ...
        'stimulusChroma', 'luminance', ...
        'orientationDegs', 120, ...
        'presentationMode', 'drifted', ...
        'numberOfFrames', 8, ...
        'stimOnFrameIndices', 1:8, ...
        'frameDurationSeconds', (1/2.5)/8, ...
        'temporalFrequencyHz', 2.5, ...
        'nTest', 1024, ...
        'psychometricCurveSamplesNum', 5, ...
        'spatialFreqs', logspace(log10(0.2), log10(120), 20), ...
        'validationThresholds', validationThresholds);


    % mRGCMosaic nre test: achromatic, AO6mm optics, drifting CSF @ fovea
    % but pick off cone excitations as output

    validationThresholds = [...
        0.0196
        0.0196
        0.0181
        0.0189
        0.0170
        0.0182
        0.0168
        0.0189
        0.0177
        0.0179
        0.0169
        0.0183
        0.0195
        0.0195
        0.0229
        0.0257
        0.0277
        0.0390
        0.0678
        0.1892
    ];

    t_spatialCSF('useMetaContrast', true, ...
        'whichNoiseFreeNre', 'mRGCMosaic', ...
        'mRGCOutputSignalType', 'cones', ...
        'whichNoisyInstanceNre', 'Gaussian', ...
        'gaussianSigma', 0.1, ...
        'whichClassifierEngine', 'rceTemplateDistance', ...
        'useConeContrast', true, ...
        'useFixationalEMs', false, ...
        'temporalFilterValues', [], ...
        'oiPadMethod', 'zero', ...
        'visualizeEachScene', false, ...
        'visualizeEachResponse', ~true, ...
        'responseVisualizationFunction', @nreVisualizeMRGCmosaic, ...
        'maxVisualizedNoisyResponseInstances', 2, ...
        'maxVisualizedNoisyResponseInstanceStimuli', 2, ...
        'opticsType', 'adaptiveOptics6MM', ...
        'mRGCMosaicRawEccDegs', [0 0], ...
        'mRGCMosaicRawSizeDegs', [2 2], ...
        'eccDegs', [0.0 0], ...
        'sizeDegs', [0.5 0.5], ...
        'stimulusChroma', 'luminance', ...
        'orientationDegs', 120, ...
        'presentationMode', 'drifted', ...
        'numberOfFrames', 8, ...
        'stimOnFrameIndices', 1:8, ...
        'frameDurationSeconds', (1/2.5)/8, ...
        'temporalFrequencyHz', 2.5, ...
        'nTest', 1024, ...
        'psychometricCurveSamplesNum', 5, ...
        'spatialFreqs', logspace(log10(0.2), log10(120), 20), ...
        'validationThresholds', validationThresholds);


    % mRGCMosaic nre test: L-M, AO6mm optics, drifting CSF @ fovea

    validationThresholds = [...
0.0233
    0.0229
    0.0229
    0.0215
    0.0199
    0.0200
    0.0202
    0.0214
    0.0205
    0.0214
    0.0203
    0.0222
    0.0223
    0.0240
    0.0270
    0.0269
    0.0340
    0.0497
    0.0924
    0.2752
    ];

    t_spatialCSF('useMetaContrast', true, ...
        'whichNoiseFreeNre', 'mRGCMosaic', ...
        'mRGCOutputSignalType', 'mRGCs', ...
        'whichNoisyInstanceNre', 'Gaussian', ...
        'gaussianSigma', 0.1, ...
        'whichClassifierEngine', 'rceTemplateDistance', ...
        'useConeContrast', true, ...
        'useFixationalEMs', false, ...
        'temporalFilterValues', [], ...
        'oiPadMethod', 'zero', ...
        'visualizeEachScene', false, ...
        'visualizeEachResponse', true, ...
        'responseVisualizationFunction', @nreVisualizeMRGCmosaic, ...
        'maxVisualizedNoisyResponseInstances', 2, ...
        'maxVisualizedNoisyResponseInstanceStimuli', 2, ...
        'opticsType', 'adaptiveOptics6MM', ...
        'mRGCMosaicRawEccDegs', [0 0], ...
        'mRGCMosaicRawSizeDegs', [2 2], ...
        'eccDegs', [0.0 0], ...
        'sizeDegs', [0.5 0.5], ...
        'stimulusChroma', 'red-green', ...
        'orientationDegs', 120, ...
        'presentationMode', 'drifted', ...
        'numberOfFrames', 8, ...
        'stimOnFrameIndices', 1:8, ...
        'frameDurationSeconds', (1/2.5)/8, ...
        'temporalFrequencyHz', 2.5, ...
        'nTest', 1024, ...
        'psychometricCurveSamplesNum', 5, ...
        'spatialFreqs', logspace(log10(0.2), log10(120), 20), ...
        'validationThresholds', validationThresholds);


    % mRGCMosaic nre test: L-M,  native optics, drifting CSF @ fovea

    t_spatialCSF('useMetaContrast', true, ...
        'whichNoiseFreeNre', 'mRGCMosaic', ...
        'mRGCOutputSignalType', 'mRGCs', ...
        'whichNoisyInstanceNre', 'Gaussian', ...
        'gaussianSigma', 0.1, ...
        'whichClassifierEngine', 'rceTemplateDistance', ...
        'useConeContrast', true, ...
        'useFixationalEMs', false, ...
        'temporalFilterValues', [], ...
        'oiPadMethod', 'zero', ...
        'visualizeEachScene', false, ...
        'visualizeEachResponse', true, ...
        'responseVisualizationFunction', @nreVisualizeMRGCmosaic, ...
        'maxVisualizedNoisyResponseInstances', 2, ...
        'maxVisualizedNoisyResponseInstanceStimuli', 2, ...
        'opticsType', 'loadComputeReadyRGCMosaic', ...
        'mRGCMosaicRawEccDegs', [0 0], ...
        'mRGCMosaicRawSizeDegs', [2 2], ...
        'eccDegs', [0.0 0], ...
        'sizeDegs', [0.5 0.5], ...
        'stimulusChroma', 'red-green', ...
        'orientationDegs', 120, ...
        'presentationMode', 'drifted', ...
        'numberOfFrames', 8, ...
        'stimOnFrameIndices', 1:8, ...
        'frameDurationSeconds', (1/2.5)/8, ...
        'temporalFrequencyHz', 2.5, ...
        'nTest', 1024, ...
        'psychometricCurveSamplesNum', 5, ...
        'spatialFreqs', logspace(log10(0.2), log10(120), 20), ...
        'validationThresholds', validationThresholds);

%}
