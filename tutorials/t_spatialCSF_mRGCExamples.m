% t_spatialCSF_mRGCExamples
%
% These are examples for t_spatialCSF that exercise the mRGC calculations.

% Examples:
%{
    % mRGCMosaic nre basic test
    t_spatialCSF('useMetaContrast', true, ...
        'whichNoiseFreeNre', 'mRGCMosaic', ...
        'mRGCOutputSignalType', 'mRGCs', ...
        'whichNoisyInstanceNre', 'Gaussian', ...
        'gaussianSigma', 0.1, ...
        'whichClassifierEngine', 'rceTemplateDistance', ...
        'useConeContrast', true, ...
        'useFixationalEMs', false, ...
        'temporalFilterValues', [], ...
        'oiPadMethod', 'zero', ...
        'visualizeEachScene', false, ...
        'visualizeEachResponse', true, ...
        'responseVisualizationFunction', @nreVisualizeMRGCmosaic, ...
        'maxVisualizedNoisyResponseInstances', 2, ...
        'maxVisualizedNoisyResponseInstanceStimuli', 2, ...
        'spatialFreqs', [0.3 0.6 1.2 3 6 12 30 60], ...
        'nTest', 1024, ...
        'validationThresholds', [0.5112 0.2519 0.1664 0.1859 0.1833 0.1797 0.5479 1.0000]);

    % mRGCMosaic nre basic test, different optics: adaptive optics, 6mm pupil
    t_spatialCSF('useMetaContrast', true, ...
        'opticsType', 'adaptiveOptics6MM', ...
        'mRGCMosaicRawEccDegs', [0 0], ...
        'mRGCMosaicRawSizeDegs', [2 2], ...
        'eccDegs', [0.0 0], ...
        'sizeDegs', [0.5 0.5], ...
        'whichNoiseFreeNre', 'mRGCMosaic', ...
        'mRGCOutputSignalType', 'mRGCs', ...
        'whichNoisyInstanceNre', 'Gaussian', ...
        'gaussianSigma', 0.1, ...
        'whichClassifierEngine', 'rceTemplateDistance', ...
        'useConeContrast', true, ...
        'useFixationalEMs', false, ...
        'temporalFilterValues', [], ...
        'oiPadMethod', 'zero', ...
        'visualizeEachScene', false, ...
        'visualizeEachResponse', true, ...
        'responseVisualizationFunction', @nreVisualizeMRGCmosaic, ...
        'maxVisualizedNoisyResponseInstances', 2, ...
        'maxVisualizedNoisyResponseInstanceStimuli', 2, ...
        'spatialFreqs', [0.3 0.6 1.2 3 6 12 30 60 120], ...
        'nTest', 1024, ...
        'validationThresholds', [0.5135    0.2549    0.1642    0.1751    0.1438    0.0953    0.0910    0.1352    0.8044]);

    % mRGCMosaic nre basic test, different optics: same as what was used to optimize the mRGCmosaic
    t_spatialCSF('useMetaContrast', true, ...
        'opticsType', 'loadComputeReadyRGCMosaic', ...
        'mRGCMosaicRawEccDegs', [0 0], ...
        'mRGCMosaicRawSizeDegs', [2 2], ...
        'eccDegs', [0.0 0], ...
        'sizeDegs', [0.5 0.5], ...
        'whichNoiseFreeNre', 'mRGCMosaic', ...
        'mRGCOutputSignalType', 'mRGCs', ...
        'whichNoisyInstanceNre', 'Gaussian', ...
        'gaussianSigma', 0.1, ...
        'whichClassifierEngine', 'rceTemplateDistance', ...
        'useConeContrast', true, ...
        'useFixationalEMs', false, ...
        'temporalFilterValues', [], ...
        'oiPadMethod', 'zero', ...
        'visualizeEachScene', false, ...
        'visualizeEachResponse', true, ...
        'responseVisualizationFunction', @nreVisualizeMRGCmosaic, ...
        'maxVisualizedNoisyResponseInstances', 2, ...
        'maxVisualizedNoisyResponseInstanceStimuli', 2, ...
        'spatialFreqs', [0.3 0.6 1.2 3 6 12 30 60 120], ...
        'nTest', 1024, ...
        'validationThresholds', [0.5112    0.2519    0.1664    0.1859    0.1833    0.1797    0.5479    1.0000    1.0000]);

    % mRGCMosaic nre basic test, different optics: native optics, no optimization of Strehl ratio
    t_spatialCSF('useMetaContrast', true, ...
        'opticsType', 'nativeOpticsNoStrehlRatioOptimization', ...
        'mRGCMosaicRawEccDegs', [0 0], ...
        'mRGCMosaicRawSizeDegs', [2 2], ...
        'eccDegs', [0.0 0], ...
        'sizeDegs', [0.5 0.5], ...
        'whichNoiseFreeNre', 'mRGCMosaic', ...
        'mRGCOutputSignalType', 'mRGCs', ...
        'whichNoisyInstanceNre', 'Gaussian', ...
        'gaussianSigma', 0.1, ...
        'whichClassifierEngine', 'rceTemplateDistance', ...
        'useConeContrast', true, ...
        'useFixationalEMs', false, ...
        'temporalFilterValues', [], ...
        'oiPadMethod', 'zero', ...
        'visualizeEachScene', false, ...
        'visualizeEachResponse', true, ...
        'responseVisualizationFunction', @nreVisualizeMRGCmosaic, ...
        'maxVisualizedNoisyResponseInstances', 2, ...
        'maxVisualizedNoisyResponseInstanceStimuli', 2, ...
        'spatialFreqs', [0.3 0.6 1.2 3 6 12 30 60 120], ...
        'nTest', 1024, ...
        'validationThresholds', [1.0000    0.6955    0.4139    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000]);


    % mRGCMosaic nre basic test, different eccentricities
    % Raw mosaic generated at (-2,0), testing a 0.5x0.5 patch of it at (-1.5,0)
    t_spatialCSF('useMetaContrast', true, ...
        'opticsType', 'loadComputeReadyRGCMosaic', ...
        'mRGCMosaicRawEccDegs', [-2 0], ...
        'mRGCMosaicRawSizeDegs', [2 2], ...
        'eccDegs', [-1.5 0], ...
        'sizeDegs', [0.5 0.5], ...
        'whichNoiseFreeNre', 'mRGCMosaic', ...
        'mRGCOutputSignalType', 'mRGCs', ...
        'whichNoisyInstanceNre', 'Gaussian', ...
        'gaussianSigma', 0.1, ...
        'whichClassifierEngine', 'rceTemplateDistance', ...
        'useConeContrast', true, ...
        'useFixationalEMs', false, ...
        'temporalFilterValues', [], ...
        'oiPadMethod', 'zero', ...
        'visualizeEachScene', false, ...
        'visualizeEachResponse', true, ...
        'responseVisualizationFunction', @nreVisualizeMRGCmosaic, ...
        'maxVisualizedNoisyResponseInstances', 2, ...
        'maxVisualizedNoisyResponseInstanceStimuli', 2, ...
        'spatialFreqs', [0.3 0.6 1.2 3 6 12 30 60 120], ...
        'nTest', 1024, ...
        'validationThresholds', [0.3 0.6 1.2 3 6 12 30 60 120]);


    

    % Raw mosaic generated at (-10,0), testing a 1x1 patch of it at (-9,0)
    t_spatialCSF('useMetaContrast', true, ...
        'mRGCMosaicRawEccDegs', [-10 0], ...
        'mRGCMosaicRawSizeDegs', [4 4], ...
        'eccDegs', [-9 0], ...
        'sizeDegs', [1 1], ...
        'whichNoiseFreeNre', 'mRGCMosaic', ...
        'mRGCOutputSignalType', 'mRGCs', ...
        'whichNoisyInstanceNre', 'Gaussian', ...
        'gaussianSigma', 0.1, ...
        'whichClassifierEngine', 'rceTemplateDistance', ...
        'useConeContrast', true, ...
        'useFixationalEMs', false, ...
        'temporalFilterValues', [], ...
        'oiPadMethod', 'zero', ...
        'visualizeEachScene', false, ...
        'visualizeEachResponse', true, ...
        'responseVisualizationFunction', @nreVisualizeMRGCmosaic, ...
        'maxVisualizedNoisyResponseInstances', 2, ...
        'maxVisualizedNoisyResponseInstanceStimuli', 2, ...
        'spatialFreqs', [0.3 0.6 1.2 3 6 12 30 60 120], ...
        'nTest', 1024, ...
        'validationThresholds', [0.3 0.6 1.2 3 6 12 30 60 120]);


    % mRGCMosaic nre basic test with fixational eye movements
    t_spatialCSF('useMetaContrast', true, ...
        'whichNoiseFreeNre', 'mRGCMosaic', ...
        'mRGCOutputSignalType', 'mRGCs', ...
        'whichNoisyInstanceNre', 'Gaussian', ...
        'gaussianSigma', 0.001, ...
        'whichClassifierEngine', 'rceTemplateDistance', ...
        'useConeContrast', true, ...
        'useFixationalEMs', true, ...
        'temporalFilterValues', [0.0118    0.0076    0.0106    0.0185], ...
        'oiPadMethod', 'zero', ...
        'validationThresholds', [], ...
        'visualizeEachScene', false, ...
        'visualizeEachResponse', false, ...
        'responseVisualizationFunction', @nreVisualizeMRGCmosaic, ...
        'maxVisualizedNoisyResponseInstances', 2, ...
        'validationThresholds', [0.1001    0.0284    0.0447    0.2184]); 

    % mRGCMosaic nre, but pick off cone excitations as output
    t_spatialCSF('useMetaContrast', true, ...
        'whichNoiseFreeNre', 'mRGCMosaic', ...
        'mRGCOutputSignalType', 'cones', ...
        'whichNoisyInstanceNre', 'Gaussian', ...
        'whichClassifierEngine', 'rceTemplateDistance', ...
        'useConeContrast', false, ...
        'useFixationalEMs', false, ...
        'temporalFilterValues', [], ...
        'oiPadMethod', 'zero', ...
        'visualizeEachResponse', false, ...
        'maxVisualizedNoisyResponseInstances', 9, ... 
        'validationThresholds', [ 0.1443    0.1547    0.2420    0.5703]);
%}
